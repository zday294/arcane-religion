# Whatever would posess you to make this?

A little while ago, I approched the DM of one of my DnD games with the proposition for my musically and stabbily inclined Wizard to start learning Cleric and Paladin spells. Given that it made sense for my character, the only non-religious person in a party of Clerics and Paladins, to want to learn those spells (while also having enough hubris to refuse to worship a god to gain said spell knowledge), the DM agreed and worked out a system for my character to learn these spells. If you're familiar with DnD 5e's rules, you'll know that Wizarding is an expensive and massively time consuming endeavor. If you aren't familiar with DnD 5e's rules, Wizarding is an expensive and massively time consuming endeavor. Either way, all that cost for wizardry? Yeah, violating the laws of the universe to achieve divine power without the approval of the gods is *far* more expensive and time consuming. And difficult. And dangerous. But totally worth it if it works out.

Because it's so expensive and time consuming and has a chance of not even working on first attempt, I wanted to know how much gold and time I should be expecting to spend on this. Specifically (and here's our problem statement) **Given the base cost of an attempt to learn a Cleric or Paladin spell (both in gold pieces and days of work), the chances of succeeding on each of the checks required to learn the spell, and the additional costs incurred by subsequent attempts (also given in both gold pieces and days of work), how much money should I expect my character to spend on learning a spell.** Also, given that the costs are different depending on the level of the spell, but don't scale evenly, I wanted to know that information for all the different spell levels.

## So how is all of this working mechanically in game?

> **Heads Up**: If you don't understand DnD 5e, this next part probably isn't going to make sense. I recommend skipping ahead to [So how has calculating all this gone?](##so-how-has-calculating-all-this-gone?). If you do want to understand this part, it relies on the Basic Rules which you can find for free all over the web. D&D Beyond has them [here at this link](https://www.dndbeyond.com/sources/dnd/basic-rules-2014). Yes, the 2014 rules are what I'm operating on. It's the system I know and... use. It's a lot to read - it's basically a textbook - so I *really* don't recommend doing this unless you actually want to learn how to play DnD, and even then, YouTube videos will likely explain it all far better.

Let me introduce these handy dandy charts my DM gave me which outline everything my DM told me I need to do when trying learn a cleric or Paladin spell.

![This is the chart showing the process flowchart for learning a Cleric or Paladin spell](./doc-aids/process.png)

||Cantrip|Level 1|Level 2|Level 3|Level 4|Level 5|
|-|-|-|-|-|-|-|
|GP Cost|60|240|600|1200|3000|7200|
|Time|1 workweek*|1 workweek|2 workweeks|3 workweeks|5 workweeks|6 workweeks|
|Setback Time|1 day|2 days|1 workweek|1 workweek|2 workweeks|2 workweeks|
|Religion Check DC|18|18|18|20|20|20|
|Arcana Check DC|14|16|18|20|22|25|
|*A workweek is defined as 5 days of work.|

The first chart explains the process of learning a spell. Once material components are purchased, including some written form of the spell such as a spell scroll, the Wizard must first spend the time and gold to research the spell. After this is complete, the Wizard makes a Religion check to represent decrypting the sepll. TODO: come back to this when you have more definitive answers from Troy.

### How does your character stack up in all this?

Short answer: ok, but with a ton of room for improvement.

Long answer: my character, Caladon, is (at time of writing) a level 9 Wizard with an Intelligence score of 19, Wisdom of 11, Charisma of 12, and proficiency in Arcana. This means that he has a +4 to Religion checks and a +8 to Arcana checks. Not great, especially, for the Religion checks. And given the requirements to learn Cleric and Paladin spells of certain levels, he can't even learn that much. So uh... introducing the game plan for Caladon's advancement!

### The Game Plan for Caladon's Advancement

There's only a couple of key levels here where there's actually choices to make and things to change, so I shall just explain those levels.

#### Level 12

The plan begins here at this level. DnD 5e players will be well aware that this is a level where you get choice of Ability Score Increase (ASI) or Feat (which is techinally an optional rule for those who didn't know). For those who aren't aware of what either of those things mean, go read the Basic Rules like I told you to.

I'm going to take the Skill Expert Feat and with it gain Expertise in Arcana, Proficiency in Religion, and a +1 to my Wisdom score. That will increase my Wisdom score to 12 meaning I can learn level 1 cleric spells now. A great start and things get crazier from here.

#### Level 13

"Wait, wait, wait? Level 13? But you don't get another ASI or Feat until level 16? Is the Proficiency Bonus you gain at this level really worth more than a footnote? I thought you were only going to talk about levels where you make choices?"

So all of that is true, *assuming* we're continuing with Wizard here. That would sound like the logical path given that Wizards are described as researchers, inquisitives, nerds, etc.. However, Wizards are lacking something crucial that we just learned the value of back one level - Expertise. You know who *does* get Expertise and rather quickly at that? Rogues. That's right, we're multiclassing into Rogue for one level. Who knew a penchant for crime made you better at unraveling the mysteries of the universe?

"Ok, but why now? Rogue gets 2 Expertises and 1 skill when you multiclass into them, so why not pick it up at say level 10"

Rogues apparently aren't religious and can't pick up the Religion skill. Which, given that in most DnD worlds, gods exist for basically everything, is surprising as I'd think that knowing which gods you can invoke on your crime spree and which gods to stay away from would be really useful in trying to stay on the right side of the wrong side of the law. But what do I know? Anyways, yeah, with one level dip into Rogue, I get two expertises, a Rogue skill choice, proficiency in Thieves' tools, and Sneak Attack. Oh, and Thieves' Cant, though I don't see myself using that much. For Expertises, I'm picking Religion to be better at this whole mess (aka the entire reason I'm dipping into this class) and Persuasion so I can better convince the rich people to help me in my attempts to go against the gods.

#### Level 17

So, now that I've delayed all my Wizard progression by a level, I get both a Proficiency Bonus increase thus increasing my Arcana and Religion bonuses by 2, and I get an ASI or Feat. I plan to take two increases to my Wisdom score so I can learn level 2 Cleric spells.

#### Level 20

Here we are - the final level. Assuming somehow I get this far without having drawn the ire of every god in the pantheon, I'll have given up my capstone feature of having an extra Counterspell and Fireball per day. And what do I get?

Another two increases to Wisdom score, meaning I will then be able to start learning 3rd level Cleric spells. What's an extra fireball when you can become anathema?

#### Table of all that stuff I just explained

|Character Level|Religion Bonus|Arcana Bonus|Max Level Cleric Spell|Max Level Paladin Spell|Notable changes|
|-|-|-|-|-|-|
|9|4|8|Cantrip|1| - |
|12|4|12|1|1|Feat: Skill Expert|
|13|14|14|1|1|Rogue Multiclass + PB increase|
|17|16|16|2|1|+2 Wis|
|20|16|16|3|1|+2 Wis|

## So how has calculating all this gone?

Uh... I mean it could have gone faster.

### Method One - AI can handle this, right?

On my first attempt to do all these calculations, I opted to give ChatGPT the problem statement and ask it for what the formula for such a calculation would look like. It gave me this:

$$Expected Cost = C_{i} + (\frac{P_{f}}{1 - P_{f}}) \times C_{f}$$

In this formula, the Expected Cost of a character attempting to learn a Cleric or Paladin spell is calculated based on three variables: the initial cost $C_{i}$, the cost of failure C<sub>f</sub>, and the percent chance of failure P<sub>f</sub>. Given that the process requires rolling two different times, I added an additional $(\frac{P_{f}}{1 - P_{f}}) \times C_{f}$ so the final formula for this method came out to be

$$Expected Cost = C_{i} + (\frac{P_{fr}}{1 - P_{fr}}) \times C_{f} + (\frac{P_{fa}}{1 - P_{fa}}) \times C_{f}$$

In this second formula, $P_{fr}$ represents the percentage chance of failure for the Religion check, and $P_{fa}$ represents the same but for Arcana. Now that I had this formula, all I had to do was plug it into a spreadsheet with my statistics and play around with some forumlas until I had a bunch of tables telling me not only how much an individual spell would cost at my current level, but also how much they cost cumulatively at future levels and a few steps in between those.

Using this method, I worked it out to be around 500,000GP and about 8 years to learn everything that Clerics and Paladins have but Wizards don't. For the spells my character could actually learn, I calculated closer to 26,000GP and 1.25 years. This total assumes that I pick up all the spells of a given level between the first character level I can learn them and the last level that I have the same stats. Good thing this guy is an elf (though much of this may just be what he does after the adventures are over lol). For individual spells, here are the tables for gold and days.

#### Gold

|Level|Cantrip|Level 1|Level 2|Level 3|Level 4|Level 5|
|-|-|-|-|-|-|-|
|9|104|432|1135|2889|7857|24000|
|12|77|320|830|1904|5040|13733|
|13|64|258|671|1467|3872|10400|
|17|61|244|621|1341|3510|9224|

#### Days

|Level|Cantrip|Level 1|Level 2|Level 3|Level 4|Level 5|
|-|-|-|-|-|-|-|
|9|9|9|19|36|65|100|
|12|6|7|14|24|42|57|
|13|5|5|11|18|32|43|
|17|5|5|10|17|29|38|

I was overall pretty satisfied with this answer as it gave me number, but...

### Method Two - Ay yo whaddup, Teach?

Given that I wasn't sure about the math of it (AI reliability in 2024, am I right?), I reached out to one of my old college profesors to ask him about the problem. Turns out my original method, courtesy of ChatGPT, was not great. The main problem he identified was that it wasn't going to properly handle repeated failures. Kinda essential given that the potential for repeating the failure is the main reason I even need to do this calculation. RIP all the hours putting together that spreadsheet. Ok then, now what?

Introducing, Monte Carlo methods, a type of mathematics that's apparently too advanced for a Bachelor's degree in computer science so lucky me I've got a friend who went to grad school. What's a Monte Carlo method you ask? Honestly, I barely understand it. [Here's the Wikipedia article on the thing](https://en.wikipedia.org/wiki/Monte_Carlo_method) if you really want to learn about the it yourself. The short version of why we're using it here is that instead of needing to define a formula for calculating how much this thing is going to cost (like I tried to do with ChatGPT), we can just use a random number generator to simulate rolling the dice like a million times. It's like that Dr. Strange "I've looked into 14,000,605 futures" thing only instead of finding the one where I win, I find the one that's most likely to happen.

So what happens (loosely) is that in each simulation, it rolls the dice to see if it succeeds. If it doesn't, it rolls again until either it does succeed or it reaches the maximum attempts, at which point it gives up. Outside of the individual simulations is a count of how many times it rolls in total across the simulations. Once all the simulations are complete, it divides the number of rolls by the number of simulations and subtracts down to the nearest integer that isn't itself ( so 2 if its 2.5, 1 if it's 2). Then this average number of additional attempts is multiplied by the cost of additional attempts and added to the cost of the initial attempt.

With this method I've gotten... much higher numbers. Which is unfortunate, but if it's more accurate, I'd rather have them. Gotta know how much money I'm actually asking for from my investors. Below I've included tables the (hypothetical) costs of the spells as calculated by this program. Technically I can't actually learn any of the spells above level 3, and I can only learn level 2 and 3 spells starting at level 17 and 20. But it's fun to hypothesize.

#### Gold

|Level|Cantrip|Level 1|Level 2|Level 3|Level 4|Level 5|
|-|-|-|-|-|-|-|
|9|120|560|1600|4400|14000|52800|
|12|80|400|1000|2400|7000|19200|
|13|80|320|800|1600|5000|12000|
|17|80|320|800|1600|4000|9600|

#### Days

|Level|Cantrip|Level 1|Level 2|Level 3|Level 4|Level 5|
|-|-|-|-|-|-|-|
|9|8|13|35|55|135|220|
|12|6|9|20|30|65|80|
|13|6|7|15|20|45|50|
|17|6|7|15|20|35|40|

While these numbers are indeed higher, what you'll notice especially with the Gold cost is that the numbers are acutally reflective of costs I can actually rack up. This method doesn't give me "partial setback costs" as it were and thus on that metric alone is giving me a much more realistic estimate of my costs.

## In Conculsion

**Why did I do this?** Because it was fun. Because it helped me sharpen skills I haven't used in a while. And because I care enough about this silly little roleplaying game to invest another nerdy skill of mine into enhancing my roleplay.

**Aren't there better ways for me to represent what I'm actually calculating here?** Probably, but that would require recognizing what those better ways are and knowing how to produce them with my Python/C hybrid app. I'm not even sure how to get an array from C to Python. Maybe I should be trying to give a graph that shows the distribution of attempts a simulation had to do, like a bell curve or something. It would probably also show me if I needed to increase the number of attempts if everything was lopsided toward the high end of the graph.

**Are there any other things I'd like to do with this?** I think it could be fun to figure out how to do this stuff on a GPU. The program really isn't so intense as to need a GPU, but given that GPUs excel at doing a bunch of the same task with only some variants on the input between workers, I think it would be a good project for me to learn how to do some GPU programming on. Also fix the fact that I sucked at doing it in college. I think I'd also like to figure out the full domain of the problem and run the program against that. Then you'd just have one massive table that you could lookup the cost on based on the stats of your character. Honestly I could probably just write a Python script to generate that input for me.

**Will I make something like this again?** Possibly. Depends on if I get given a sufficiently interesting problem that can be solved with a little math and a couple files of code. I've certainly tried for a couple things in the past, though most didn't get that far.

## Special Thanks

Thanks to my DM for working with me on this absurd, rule breaking project that gives my character something interesting to work on. This is probably the most Wizardy I've felt while playing a wizard in a long time, possibly ever. Hopefully the gods give me a couple warnings first.

Thank you also to my former professor for helping me figure out the math for this and giving me the prototype code for how to actually build the calculation. Couldn't have done it without the man willing to build a microprocessor simulator in Excel.
